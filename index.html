<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Idle Life Wiki - Grafica Spettacolare</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* Reset e base */
    * {
      box-sizing: border-box;
      transition: all 0.3s ease;
    }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #1f1c2c, #928dab);
      color: #eee;
      display: flex;
      height: 100vh;
      overflow: hidden;
      user-select: none;
    }
    /* Sidebar */
    .sidebar {
      width: 320px;
      background: #2e2a44;
      padding: 30px 25px;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      box-shadow: 5px 0 15px rgba(0,0,0,0.3);
    }
    .sidebar h2 {
      font-weight: 600;
      margin-bottom: 20px;
      letter-spacing: 1.2px;
      color: #ffd700;
      text-shadow: 1px 1px 4px #000;
    }
    /* Variants & Managers container */
    .variants, .managers {
      margin-bottom: 40px;
    }
    /* Variant & Manager item */
    .variant, .manager {
      background: #3b3754;
      border-radius: 12px;
      margin: 8px 0;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1.05rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      color: #ddd;
      border: 2px solid transparent;
      user-select: none;
    }
    .variant:hover, .manager:hover {
      background: #5a5580;
      color: #fff;
      box-shadow: 0 6px 15px #a2a0ffcc;
    }
    .variant.selected, .manager.selected {
      border: 2px solid #ffd700;
      background: linear-gradient(90deg, #ffcc00, #ffdd44);
      color: #222;
      font-weight: 700;
      box-shadow: 0 8px 20px #ffd700aa;
    }

    /* Specific variant colors */
    .variant.base {
      background: #3b3754;
    }
    .variant.gold {
      background: linear-gradient(90deg, #ffd700 0%, #ffbf00 100%);
      color: #222;
      font-weight: 700;
      box-shadow: 0 6px 12px #ffcc0099;
    }
    .variant.rainbow {
      background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet);
      color: white;
      font-weight: 700;
      box-shadow: 0 6px 15px #8a2be2aa;
    }
    .variant.inferno {
      background: linear-gradient(90deg, #ff4500, #ff6347);
      color: white;
      font-weight: 700;
      box-shadow: 0 6px 15px #ff6347bb;
    }
    .variant.oblivion {
      background: linear-gradient(90deg, #2f2f2f, #555555);
      color: white;
      font-weight: 700;
      box-shadow: 0 6px 15px #000000bb;
    }

    /* Main area */
    .main {
      flex: 1;
      padding: 30px 40px;
      background: #15141f;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #555 #222;
    }
    .main::-webkit-scrollbar {
      width: 10px;
    }
    .main::-webkit-scrollbar-track {
      background: #222;
    }
    .main::-webkit-scrollbar-thumb {
      background-color: #555;
      border-radius: 10px;
      border: 2px solid #222;
    }

    /* Structures container */
    .structures {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .structure {
      background: linear-gradient(145deg, #393857, #2f2b4a);
      border-radius: 18px;
      padding: 20px 25px;
      width: 210px;
      cursor: pointer;
      box-shadow: 0 8px 15px rgba(0,0,0,0.7);
      color: #ccc;
      border: 2px solid transparent;
      user-select: none;
      display: flex;
      flex-direction: column;
      transition: all 0.4s ease;
    }
    .structure:hover {
      box-shadow: 0 12px 25px #8a7affcc;
      border-color: #8a7affcc;
      color: #eee;
      transform: translateY(-5px);
    }
    .structure.selected {
      border: 2.5px solid #ffd700;
      background: linear-gradient(145deg, #504c87, #736fc9);
      color: #fff;
      box-shadow: 0 15px 30px #ffd700cc;
      transform: translateY(-7px);
    }
    .structure h3 {
      margin: 0 0 10px;
      font-weight: 700;
      font-size: 1.3rem;
      text-shadow: 0 1px 3px #0008;
    }
    .structure .rarity {
      font-style: italic;
      font-size: 0.9rem;
      color: #aaa;
      margin-bottom: 10px;
      text-transform: capitalize;
      letter-spacing: 0.03em;
      text-shadow: 0 1px 1px #0006;
    }
    .structure p {
      margin: 3px 0;
      font-weight: 600;
      font-size: 1rem;
      text-shadow: 0 1px 2px #0006;
    }

    /* Wiki box */
    .wiki-box {
      margin-top: 35px;
      background: #2a2750;
      border-radius: 20px;
      padding: 30px 35px;
      box-shadow: 0 15px 35px #000a inset;
      font-size: 1.1rem;
      color: #eee;
      user-select: text;
    }
    .wiki-box h3 {
      margin-top: 0;
      margin-bottom: 20px;
      font-weight: 700;
      color: #ffd700;
      text-shadow: 0 0 10px #ffd700aa;
    }
    .wiki-box p {
      margin: 8px 0;
      line-height: 1.5;
      font-weight: 500;
      letter-spacing: 0.02em;
    }

    /* Responsive */
    @media (max-width: 900px) {
      body {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        height: 250px;
        flex-shrink: 0;
        overflow-x: auto;
        overflow-y: hidden;
        display: flex;
        flex-wrap: nowrap;
        gap: 30px;
        padding: 20px;
      }
      .variants, .managers {
        margin-bottom: 0;
        display: flex;
        flex-direction: row;
        gap: 15px;
        align-items: center;
        flex-shrink: 0;
      }
      .variant, .manager {
        min-width: 110px;
        text-align: center;
        border-radius: 12px;
        padding: 10px 12px;
      }
      .main {
        padding: 20px;
        height: calc(100vh - 250px);
      }
      .structures {
        justify-content: center;
      }
      .structure {
        width: 45vw;
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div class="variants" id="variants-list">
      <h2>Varianti</h2>
    </div>
    <div class="managers" id="managers-list">
      <h2>Managers</h2>
    </div>
  </div>

  <div class="main">
    <div class="structures" id="structures-container"></div>
    <div class="wiki-box" id="wiki-text">Seleziona una struttura per vedere i dettagli.</div>
  </div>

  <script>
    const multipliers = {
      Base: 1,
      Gold: 1.5,
      Rainbow: 2,
      Inferno: 3,
      Oblivion: 4,
    };

    const variantClasses = {
      Base: "base",
      Gold: "gold",
      Rainbow: "rainbow",
      Inferno: "inferno",
      Oblivion: "oblivion",
    };

    const variants = [
      { name: "Base", multiplier: multipliers.Base },
      { name: "Gold", multiplier: multipliers.Gold },
      { name: "Rainbow", multiplier: multipliers.Rainbow },
      { name: "Inferno", multiplier: multipliers.Inferno },
      { name: "Oblivion", multiplier: multipliers.Oblivion },
    ];

    const managers = [
      { name: "Base Manager", multiplier: 1 },
      { name: "Clown Manager", multiplier: 1.2 },
      { name: "Soldier Manager", multiplier: 1.5 },
      { name: "Mayor Manager", multiplier: 2 },
      { name: "King Manager", multiplier: 2.5 },
      { name: "Angel Manager", multiplier: 3 },
    ];

    const prices = [30, 200, 500, 1200, 3500, 8000, 15000, 45000, 20000, 750000, 2500000, 5000000, 10000000, 150000000];

    const structuresData = [
      { name: "Noob", income: 1, cycleTime: 2, rarity: "common" },
      { name: "Business Man", income: 5, cycleTime: 4, rarity: "common" },
      { name: "Teacher", income: 10, cycleTime: 5, rarity: "common" },
      { name: "Builder", income: 10, cycleTime: 5, rarity: "common" },
      { name: "Gardener", income: 20, cycleTime: 8, rarity: "uncommon" },
      { name: "Painter", income: 75, cycleTime: 10, rarity: "uncommon" },
      { name: "Chef", income: 105, cycleTime: 10, rarity: "uncommon" },
      { name: "Mine", income: 189, cycleTime: 12, rarity: "rare" },
      { name: "Fortune Magician", income: 450, cycleTime: 15, rarity: "rare" },
      { name: "Bank", income: 1500, cycleTime: 20, rarity: "legendary" },
      { name: "Skyscraper", income: 4500, cycleTime: 30, rarity: "legendary" },
      { name: "Stadium", income: 16000, cycleTime: 35, rarity: "mythic" },
      { name: "Waterpark", income: 60000, cycleTime: 45, rarity: "mythic" },
      { name: "Castle", income: 250000, cycleTime: 40, rarity: "mythic" },
    ];

    let selectedVariant = variants[0];
    let selectedManager = managers[0];
    let selectedStructureIndex = null;

    function formatMoney(amount) {
      if(amount >= 1e6) {
        return "$" + (amount / 1e6).toFixed(2) + "M";
      }
      if(amount >= 1e3) {
        return "$" + (amount / 1e3).toFixed(1) + "K";
      }
      return "$" + amount.toLocaleString();
    }

    function renderManagers() {
      const container = document.getElementById("managers-list");
      container.innerHTML = '<h2>Managers</h2>';
      managers.forEach((mgr) => {
        const div = document.createElement("div");
        div.className = "manager";
        if (mgr === selectedManager) div.classList.add("selected");
        div.textContent = `${mgr.name}: x${mgr.multiplier}`;
        div.addEventListener("click", () => {
          selectedManager = mgr;
          document.querySelectorAll(".manager").forEach(el => el.classList.remove("selected"));
          div.classList.add("selected");
          updateWiki();
          renderStructures();
        });
        container.appendChild(div);
      });
    }

    function renderVariants() {
      const container = document.getElementById("variants-list");
      container.innerHTML = '<h2>Varianti</h2>';
      variants.forEach((variant) => {
        const div = document.createElement("div");
        div.className = `variant ${variantClasses[variant.name]}`;
        if (variant === selectedVariant) div.classList.add("selected");
        div.textContent = variant.name;
        div.addEventListener("click", () => {
          selectedVariant = variant;
          document.querySelectorAll(".variant").forEach(el => el.classList.remove("selected"));
          div.classList.add("selected");
          renderStructures();
          updateWiki();
        });
        container.appendChild(div);
      });
    }

    function renderStructures() {
      const container = document.getElementById("structures-container");
      container.innerHTML = "";
      structuresData.forEach((struc, i) => {
        const income = struc.income * selectedVariant.multiplier * selectedManager.multiplier;
        const moneyPerSec = (income / struc.cycleTime).toFixed(2);
        const div = document.createElement("div");
        div.className = "structure";
        if (i === selectedStructureIndex) div.classList.add("selected");
        div.innerHTML = `
          <h3>${struc.name}</h3>
          <p class="rarity">Rarity: ${struc.rarity}</p>
          <p>Price: ${formatMoney(prices[i])}</p>
          <p>Money/sec: ${moneyPerSec}</p>
        `;
        div.addEventListener("click", () => {
          selectedStructureIndex = i;
          updateWiki();
          document.querySelectorAll(".structure").forEach(el => el.classList.remove("selected"));
          div.classList.add("selected");
        });
        container.appendChild(div);
      });
    }

    function updateWiki() {
      const container = document.getElementById("wiki-text");
      if (selectedStructureIndex === null) {
        container.innerHTML = "Seleziona una struttura per vedere i dettagli.";
        return;
      }
      const struc = structuresData[selectedStructureIndex];
      const price = prices[selectedStructureIndex];
      const baseIncome = struc.income;
      const finalIncome = baseIncome * selectedVariant.multiplier * selectedManager.multiplier;
      const moneyPerSec = (finalIncome / struc.cycleTime).toFixed(2);

      container.innerHTML = `
        <h3>${struc.name} (${selectedVariant.name})</h3>
        <p><strong>Price:</strong> ${formatMoney(price)}</p>
        <p><strong>Money:</strong> ${formatMoney(finalIncome)}</p>
        <p><strong>Time:</strong> ${struc.cycleTime} sec</p>
        <p><strong>Money/sec:</strong> ${moneyPerSec}</p>
        <p><strong>Manager boost:</strong> x${selectedManager.multiplier}</p>
        <p><strong>Variant:</strong> x${selectedVariant.multiplier}</p>
      `;
    }

    // Init
    renderVariants();
    renderManagers();
    renderStructures();
  </script>
</body>
</html>
